{
  "timestamp": "2025-06-03 17:20:03",
  "tests": {
    "imports": {
      "success": true
    },
    "individual_modules": {
      "tifa": {
        "status": "success",
        "score": 0.4558170020580292
      },
      "emotion": {
        "status": "success",
        "faces": 0
      },
      "objects": {
        "status": "success",
        "count": 1
      },
      "background": {
        "status": "success",
        "score": 0.7200000000000001
      },
      "ensemble": {
        "status": "success",
        "reliability": 0.0
      }
    },
    "integration": {
      "success": true,
      "result": {
        "prompt": "a girl reading a book, autism-friendly, simple background",
        "primary_caption": "a close up of a person holding a cell phone in their hand",
        "ensemble_analysis": {
          "primary_caption": "a close up of a person holding a cell phone in their hand",
          "alternative_captions": [
            {
              "model": "BLIP-2",
              "caption": "a person is standing on a skateboard in front of a green background\n",
              "confidence": 0.8
            }
          ],
          "scene_classification": [
            {
              "label": "parachute, chute",
              "score": 0.035162486135959625
            },
            {
              "label": "flagpole, flagstaff",
              "score": 0.01663326658308506
            },
            {
              "label": "jellyfish",
              "score": 0.014984590001404285
            },
            {
              "label": "kite",
              "score": 0.012465165928006172
            },
            {
              "label": "bald eagle, American eagle, Haliaeetus leucocephalus",
              "score": 0.011713476851582527
            }
          ],
          "consensus_analysis": {
            "caption_consensus": 0.2222222222222222,
            "reliability_assessment": "low"
          },
          "reliability_score": 0.2222222222222222
        },
        "tifa_result": {
          "score": 0.3256571153799693,
          "details": {
            "clip_semantic_score": 0.336076483130455,
            "ai_component_overlap": 0.2839796443780263,
            "component_overlaps": {
              "actions": "0.38858148",
              "attributes": 0.0,
              "concepts": "0.46335745"
            },
            "clip_similarities": {
              "image_prompt": 0.1520732343196869,
              "image_caption": 0.2144009917974472,
              "prompt_caption": 0.5200797319412231
            },
            "ai_extracted_components": {
              "prompt": {
                "entities": [],
                "actions": [
                  {
                    "text": "read",
                    "tense": "VBG",
                    "dependency": "acl"
                  }
                ],
                "attributes": [
                  {
                    "text": "friendly",
                    "intensity": "moderate"
                  },
                  {
                    "text": "simple",
                    "intensity": "moderate"
                  }
                ],
                "spatial_relations": [],
                "concepts": [
                  {
                    "text": "a girl",
                    "root": "girl"
                  },
                  {
                    "text": "a book",
                    "root": "book"
                  }
                ]
              },
              "caption": {
                "entities": [],
                "actions": [
                  {
                    "text": "hold",
                    "tense": "VBG",
                    "dependency": "acl"
                  }
                ],
                "attributes": [],
                "spatial_relations": [
                  {
                    "text": "of",
                    "dependency": "prep"
                  },
                  {
                    "text": "in",
                    "dependency": "prep"
                  }
                ],
                "concepts": [
                  {
                    "text": "a close",
                    "root": "close"
                  },
                  {
                    "text": "a person",
                    "root": "person"
                  },
                  {
                    "text": "a cell phone",
                    "root": "phone"
                  },
                  {
                    "text": "their hand",
                    "root": "hand"
                  }
                ]
              }
            }
          }
        },
        "emotion_analysis": {
          "face_count": 0,
          "autism_appropriateness_score": 0.6,
          "available": true
        },
        "background_analysis": {
          "comprehensive_objects": {
            "all_detected_objects": [],
            "object_categories": {},
            "object_count": 0,
            "confidence_distribution": {},
            "spatial_distribution": {},
            "detection_consensus": {},
            "available_detectors": [
              "detr",
              "yolo",
              "segmentation"
            ]
          },
          "total_object_count": 0,
          "complexity_score": 0.1,
          "spatial_analysis": {
            "depth_variance": 5452.322933107626,
            "depth_range": 255.0,
            "gradient_magnitude": 0.12829256057739258,
            "spatial_complexity": "high",
            "ai_assessment": "Spatial complexity: high"
          },
          "scene_context": {
            "primary_scene": {
              "label": "parachute, chute",
              "score": 0.035162486135959625
            },
            "scene_alternatives": [
              {
                "label": "flagpole, flagstaff",
                "score": 0.01663326658308506
              },
              {
                "label": "jellyfish",
                "score": 0.014984590001404285
              }
            ],
            "scene_confidence": 0.035162486135959625
          },
          "autism_background_score": 0.76,
          "ai_recommendations": [
            "AI: No objects detected - perfect minimal background for autism focus",
            "AI: Complex spatial depth - may confuse autism learners"
          ],
          "detection_details": {
            "detectors_used": [
              "detr",
              "yolo",
              "segmentation"
            ],
            "detection_consensus": {},
            "confidence_analysis": {},
            "total_detections": 0
          }
        },
        "similarity": 1.0,
        "face_count": 0,
        "face_positions": [],
        "hf_analysis": {
          "available": false,
          "error": "name 'BytesIO' is not defined"
        },
        "educational_assessment": {
          "score": 46.820221260521144,
          "factors": {
            "tifa_faithfulness": 0.3256571153799693,
            "emotional_appropriateness": 0.6,
            "background_appropriateness": 0.76,
            "ai_reliability": 0.2222222222222222,
            "character_clarity": 0.3
          },
          "suitable_for_autism": "False",
          "ai_recommendations": [
            "AI: Poor prompt adherence - may confuse autism learners",
            "AI: Moderately appropriate emotional tone",
            "AI: Simple, clear background - excellent for focus",
            "AI: Moderate model consensus - interpretation may vary",
            "AI: No clear characters - limited educational value"
          ],
          "detailed_analysis": {
            "tifa_details": {
              "clip_semantic_score": 0.336076483130455,
              "ai_component_overlap": 0.2839796443780263,
              "component_overlaps": {
                "actions": "0.38858148",
                "attributes": 0.0,
                "concepts": "0.46335745"
              },
              "clip_similarities": {
                "image_prompt": 0.1520732343196869,
                "image_caption": 0.2144009917974472,
                "prompt_caption": 0.5200797319412231
              },
              "ai_extracted_components": {
                "prompt": {
                  "entities": [],
                  "actions": [
                    {
                      "text": "read",
                      "tense": "VBG",
                      "dependency": "acl"
                    }
                  ],
                  "attributes": [
                    {
                      "text": "friendly",
                      "intensity": "moderate"
                    },
                    {
                      "text": "simple",
                      "intensity": "moderate"
                    }
                  ],
                  "spatial_relations": [],
                  "concepts": [
                    {
                      "text": "a girl",
                      "root": "girl"
                    },
                    {
                      "text": "a book",
                      "root": "book"
                    }
                  ]
                },
                "caption": {
                  "entities": [],
                  "actions": [
                    {
                      "text": "hold",
                      "tense": "VBG",
                      "dependency": "acl"
                    }
                  ],
                  "attributes": [],
                  "spatial_relations": [
                    {
                      "text": "of",
                      "dependency": "prep"
                    },
                    {
                      "text": "in",
                      "dependency": "prep"
                    }
                  ],
                  "concepts": [
                    {
                      "text": "a close",
                      "root": "close"
                    },
                    {
                      "text": "a person",
                      "root": "person"
                    },
                    {
                      "text": "a cell phone",
                      "root": "phone"
                    },
                    {
                      "text": "their hand",
                      "root": "hand"
                    }
                  ]
                }
              }
            },
            "emotion_details": {
              "face_count": 0,
              "autism_appropriateness_score": 0.6,
              "available": true
            },
            "background_details": {
              "comprehensive_objects": {
                "all_detected_objects": [],
                "object_categories": {},
                "object_count": 0,
                "confidence_distribution": {},
                "spatial_distribution": {},
                "detection_consensus": {},
                "available_detectors": [
                  "detr",
                  "yolo",
                  "segmentation"
                ]
              },
              "total_object_count": 0,
              "complexity_score": 0.1,
              "spatial_analysis": {
                "depth_variance": 5452.322933107626,
                "depth_range": 255.0,
                "gradient_magnitude": 0.12829256057739258,
                "spatial_complexity": "high",
                "ai_assessment": "Spatial complexity: high"
              },
              "scene_context": {
                "primary_scene": {
                  "label": "parachute, chute",
                  "score": 0.035162486135959625
                },
                "scene_alternatives": [
                  {
                    "label": "flagpole, flagstaff",
                    "score": 0.01663326658308506
                  },
                  {
                    "label": "jellyfish",
                    "score": 0.014984590001404285
                  }
                ],
                "scene_confidence": 0.035162486135959625
              },
              "autism_background_score": 0.76,
              "ai_recommendations": [
                "AI: No objects detected - perfect minimal background for autism focus",
                "AI: Complex spatial depth - may confuse autism learners"
              ],
              "detection_details": {
                "detectors_used": [
                  "detr",
                  "yolo",
                  "segmentation"
                ],
                "detection_consensus": {},
                "confidence_analysis": {},
                "total_detections": 0
              }
            },
            "ensemble_details": {
              "primary_caption": "a close up of a person holding a cell phone in their hand",
              "alternative_captions": [
                {
                  "model": "BLIP-2",
                  "caption": "a person is standing on a skateboard in front of a green background\n",
                  "confidence": 0.8
                }
              ],
              "scene_classification": [
                {
                  "label": "parachute, chute",
                  "score": 0.035162486135959625
                },
                {
                  "label": "flagpole, flagstaff",
                  "score": 0.01663326658308506
                },
                {
                  "label": "jellyfish",
                  "score": 0.014984590001404285
                },
                {
                  "label": "kite",
                  "score": 0.012465165928006172
                },
                {
                  "label": "bald eagle, American eagle, Haliaeetus leucocephalus",
                  "score": 0.011713476851582527
                }
              ],
              "consensus_analysis": {
                "caption_consensus": 0.2222222222222222,
                "reliability_assessment": "low"
              },
              "reliability_score": 0.2222222222222222
            }
          }
        },
        "quality_score": 0.46820221260521144,
        "recommendations": [
          "AI: Poor prompt adherence - may confuse autism learners",
          "AI: Moderately appropriate emotional tone",
          "AI: Simple, clear background - excellent for focus",
          "AI: Moderate model consensus - interpretation may vary",
          "AI: No clear characters - limited educational value"
        ],
        "context": "autism_storyboard",
        "enhanced_features": {
          "tifa_available": true,
          "emotion_ai_available": true,
          "background_ai_available": true,
          "ensemble_available": true
        }
      }
    },
    "coherence": {
      "success": true,
      "result": [
        {
          "frame": 1,
          "prompt": "a boy waking up in bed, autism-friendly cartoon",
          "consistency_score": 1.0
        },
        {
          "frame": 2,
          "prompt": "the same boy brushing his teeth, autism-friendly cartoon",
          "consistency_score": 1.0
        },
        {
          "frame": 3,
          "prompt": "the same boy eating breakfast, autism-friendly cartoon",
          "consistency_score": 1.0
        },
        {
          "frame": 4,
          "prompt": "the same boy going to school, autism-friendly cartoon",
          "consistency_score": 1.0
        }
      ]
    },
    "learning": {
      "success": true,
      "result": {
        "model_found": true,
        "model_path": "RealCartoon-XL.safetensors",
        "learning_available": true,
        "mock_test": true
      }
    },
    "performance": {
      "tifa": {
        "time": 0.6709158420562744,
        "status": "success"
      },
      "emotion": {
        "time": 0.0065822601318359375,
        "status": "success"
      },
      "objects": {
        "time": 1.4032578468322754,
        "status": "success"
      },
      "total_pipeline": {
        "time": 2.0807559490203857,
        "status": "calculated"
      }
    }
  }
}